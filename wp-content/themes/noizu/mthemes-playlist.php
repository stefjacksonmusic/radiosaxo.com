<?php  
global $mthemes_acf_active;

$default_playlist           = mthemes_get_field(array('field' => 'default_playlist', 'is' => 'object', 'post_id' => 'options'));
$default_playlist_fields    = false;
$default_playlist_data      = false;

// get default tracks data 

if($default_playlist and $mthemes_acf_active){
    $default_playlist_fields   = get_fields($default_playlist->ID);

    if(is_array($default_playlist_fields) and !empty($default_playlist_fields['audio_tracks'])){
        $default_playlist_data = array();
        $default_playlist_data['title']     = $default_playlist->post_title;
        $default_playlist_data['author']    = (!empty($default_playlist_fields['author']))? $default_playlist_fields['author'] : '';
        $default_playlist_data['cover']     = (!empty($default_playlist_fields['cover']))? $default_playlist_fields['cover'] : '';
        $default_playlist_data['tracks']    = array();

        if(!empty($default_playlist_fields['audio_tracks'])){
            foreach($default_playlist_fields['audio_tracks'] as $_track){
                $_track_data    = array();
                $_track_fields  = get_fields($_track->ID);

                if(is_array($_track_fields) and !empty($_track_fields['mp3_file'])){
                    $_track_data['name']        = $_track->post_title;
                    $_track_data['artist']      = $_track_fields['author'];
                    $_track_data['duration']    = $_track_fields['duration'];
                    $_track_data['path']        = $_track_fields['mp3_file']['url'];

                    $default_playlist_data['tracks'][] = $_track_data;
                }
            }
        }
    }
}

if(!empty($default_playlist_data)): ?><script>window.noizuDefaultPlaylist = <?php echo json_encode($default_playlist_data) ?>;</script><?php endif;
?>
<div id="playlist" class="hide" data-deliverance-region="playlist">
    <canvas id="playlist-background" data-deliverance-element="background"></canvas>
    <div id="playlist-background-overlay"></div>
    <div id="playlist-container" data-deliverance-element="container">
        <div id="playlist-content" data-deliverance-element="content">
            <div id="playlist-left" data-deliverance-element="left"></div>
            <div id="playlist-right" data-deliverance-element="right">
                <!-- amazon icon -->
                <a href="--icourl--" target="_blank" class="right history-ignore hide ico-button" data-deliverance-element="ico-amazon">
                    <svg width="21px" height="20px" viewBox="0 0 21 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <path d="M11.6239456,5.56418779 C11.0209938,5.6073951 10.3260514,5.65101786 9.63067303,5.73867885 C8.56558883,5.87245534 7.49919671,6.04777732 6.61940141,6.44619859 C4.90515209,7.10843373 3.74633351,8.52139593 3.74633351,10.5961778 C3.74633351,13.2023265 5.50679606,14.5267968 7.73157079,14.5267968 C8.47229042,14.5267968 9.07611425,14.437474 9.63023706,14.3061903 C10.5113403,14.0407146 11.2524959,13.5554632 12.1335991,12.6709597 C12.6428166,13.3340258 12.7823282,13.6439551 13.6621235,14.349813 C13.8936257,14.437474 14.1251278,14.437474 14.3099807,14.3061903 C14.8667194,13.8641462 15.8402491,13.0685501 16.3494666,12.6281678 C16.5818407,12.451184 16.5351914,12.1861238 16.3952438,11.9667636 C15.8868983,11.3477358 15.3759369,10.8176153 15.3759369,9.6248442 L15.3759369,5.65101786 C15.3759369,3.97299543 15.5154485,2.42708766 14.2179902,1.28043207 C13.152906,0.353967595 11.484434,-8.8817842e-16 10.1869757,-8.8817842e-16 L9.63023706,-8.8817842e-16 C7.26813055,0.130452846 4.76520448,1.10261737 4.20933777,3.88533444 C4.11647534,4.23930204 4.39506265,4.37058579 4.58078752,4.41420856 L7.17483214,4.72330702 C7.4542914,4.67968425 7.59205915,4.45783133 7.63870835,4.23888658 C7.87021049,3.26672206 8.70379255,2.7806398 9.63023706,2.6921479 L9.81683388,2.6921479 C10.3727006,2.6921479 10.9747805,2.91358538 11.2991451,3.35521396 C11.6697229,3.88491899 11.6235097,4.59202327 11.6235097,5.21022019 L11.6235097,5.56418779 L11.6239456,5.56418779 Z M11.1147281,10.8176153 C10.7903636,11.4341504 10.2336249,11.8317408 9.63067303,11.9667636 C9.53868254,11.9667636 9.40004285,12.0103864 9.26009523,12.0103864 C8.24166024,12.0103864 7.63870835,11.2588284 7.63870835,10.1553801 C7.63870835,8.74200249 8.5193756,8.07976735 9.63023706,7.77066888 C10.2331889,7.63855422 10.9281313,7.59368509 11.6235097,7.59368509 L11.6235097,8.12422102 C11.6239456,9.13959285 11.6697229,9.93394267 11.1147281,10.8176153 Z M20.9965122,14.9783963 L20.9965122,14.9775654 C20.9877927,14.7681762 20.9411435,14.6098878 20.850025,14.4777732 L20.8408695,14.465725 L20.8299702,14.4528459 C20.7371077,14.3564603 20.648605,14.3199003 20.5513829,14.2791857 C20.2645121,14.1736602 19.8464131,14.1175737 19.3424273,14.1159119 C18.980569,14.1159119 18.5803449,14.1483174 18.1801209,14.2318238 L18.179249,14.2064811 L17.7746652,14.3348567 L17.7676896,14.3381803 L17.5396753,14.4088076 L17.5396753,14.4183631 C17.2724233,14.5238887 17.0287139,14.6560033 16.8024434,14.8117989 C16.6629318,14.912339 16.5452188,15.0448691 16.5386792,15.248442 C16.5351914,15.3589531 16.5940479,15.4860823 16.693014,15.5616951 C16.7902362,15.6373079 16.9040254,15.6622351 17.0038634,15.6622351 C17.0278419,15.6622351 17.0496406,15.6614042 17.0692595,15.6580806 L17.0888783,15.6564188 L17.1041374,15.653926 C17.3016335,15.6140424 17.5893763,15.5874533 17.9259481,15.5417532 C18.2145628,15.5118405 18.5210525,15.4889904 18.7869966,15.4889904 C18.9753373,15.4881595 19.1436232,15.5002077 19.2595923,15.5247196 C19.3175768,15.5359369 19.3607382,15.5504778 19.3855887,15.5621105 C19.3934362,15.5654342 19.3991039,15.5687578 19.4025917,15.5708351 C19.4078234,15.5862069 19.4152349,15.6252597 19.414363,15.6813461 C19.4169788,15.8932281 19.3215005,16.285833 19.1928882,16.6688824 C19.0668918,17.0527628 18.913429,17.437474 18.8114111,17.6929788 C18.7874325,17.7523889 18.7721734,17.8163689 18.7721734,17.8869963 C18.7704296,17.9900291 18.8140269,18.1142501 18.9077613,18.1969256 C18.9988799,18.2796012 19.1165928,18.3120066 19.2159949,18.3120066 L19.2203546,18.3120066 C19.3694577,18.3103448 19.4954541,18.2542584 19.6044476,18.1732447 C20.6298582,17.2945575 20.9856129,15.8932281 21,15.1034483 L20.9965122,14.9783963 Z M17.9582102,16.1940174 C17.8535765,16.1931865 17.7463269,16.2168675 17.6464889,16.2613211 C17.5331357,16.3045285 17.4184745,16.3539676 17.310789,16.3975904 L17.1507866,16.4607395 L16.942827,16.5392605 L16.942827,16.5417532 C14.689714,17.4125467 12.3232477,17.9227254 10.1333509,17.9675945 C10.0531317,17.9700872 9.97247656,17.9700872 9.89312931,17.9700872 C6.44980757,17.9717491 3.63995588,16.4495222 0.80394576,14.94973 C0.704543715,14.9002908 0.604705695,14.8741172 0.504867675,14.8741172 C0.376691353,14.8741172 0.246335162,14.9194017 0.151292855,15.00457 C0.0558145739,15.0897383 -0.000862031106,15.2139593 9.91666344e-06,15.3398421 C-0.000426057221,15.5039468 0.0924363802,15.653926 0.221048676,15.7511425 C2.88223327,17.9526381 5.79846258,19.9983382 9.72004768,20 C9.79677908,20 9.87438243,19.9983382 9.95329371,19.9966764 C12.4475003,19.9430827 15.2699952,19.1404238 17.4594561,17.829248 L17.4720993,17.8209389 C17.7589701,17.6576651 18.045841,17.4719568 18.3161448,17.2658912 C18.4848667,17.1466556 18.6003997,16.9617781 18.5986558,16.7685916 C18.5934242,16.4262568 18.2878065,16.1940174 17.9582102,16.1940174 Z" id="amazon" fill="#000000" sketch:type="MSShapeGroup"></path>
                        </g>
                    </svg>
                </a>
                <!-- itunes icon -->
                <a href="--icourl--" target="_blank" class="right history-ignore hide ico-button" data-deliverance-element="ico-itunes">
                    <svg width="21px" height="20px" viewBox="0 0 21 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <path d="M17,1.77635684e-15 L4.99487158,1.75788749 L4.99797703,14.5665991 C4.99797703,14.5665991 2.90653372,14.6802448 2.49971969,14.8003929 C0.723557244,15.3255424 -0.349220653,16.8761632 0.103709312,18.2637786 C0.55656164,19.6512461 2.36370096,20.3504849 4.13986341,19.8254093 C5.60167662,19.3932157 7.01364736,18.2169311 7.08864399,17.0577894 C7.0899638,17.0584545 7.09058489,17.0586022 7.09058489,17.0586022 L7.09058489,17.0213607 C7.09369034,16.9546364 7.09407853,16.887912 7.09058489,16.8211877 L7.09058489,5.99588156 L15.4897418,4.93560717 L15.4895865,13.5486647 L14.1597549,13.4918419 C14.0335184,13.4858566 13.9058843,13.4854133 13.7771634,13.4910291 L13.7371031,13.4908813 L13.7398204,13.4928764 C13.413127,13.5097976 13.0811543,13.5644037 12.7535293,13.6613498 C10.9772892,14.1864254 9.90466656,15.7370462 10.3574412,17.1245138 C10.8103712,18.5121291 12.6175105,19.2112201 14.393673,18.6861445 C15.8714016,18.2492958 16.945577,17.1017551 16.9995342,15.9293129 L17,1.77635684e-15 L17,1.77635684e-15 Z" id="itunes" fill="#000000" sketch:type="MSShapeGroup"></path>
                        </g>
                    </svg>
                </a>
                <!-- tracks list  -->
                <ul data-deliverance-element="tracks-list"></ul>
            </div>
        </div>
    </div>
</div>